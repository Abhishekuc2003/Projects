#include <Wire.h>
#include <AFMotor.h>
// Assign motors to specific ports on the shield
AF_DCMotor motor1(1,MOTOR12_64KHZ);
AF_DCMotor motor2(2,MOTOR12_64KHZ);
// Variables for autonomous mode
unsigned long previousMillis = 0;
const long interval = 6 * 60 * 60 * 1000; // Cleaning every 6 hours
// Bluetooth control variables
int bluetoothCommand;
void setup() {
Serial.begin(9600); // Bluetooth module communication
// Initialize motors
motor1.setSpeed(0);
motor2.setSpeed(0);
Serial.println("Smart Solar Panel Cleaning System Initialized.");
}
void loop() {
// Autonomous cleaning after interval
unsigned long currentMillis = millis();
if (currentMillis - previousMillis >= interval) {
previousMillis = currentMillis;
autonomousCleaning();
}
// Check for Bluetooth commands
if (Serial.available() > 0) {
bluetoothCommand = Serial.read();
Serial.println (bluetoothCommand);
handleBluetoothCommand(bluetoothCommand);
}
}
void autonomousCleaning() {
Serial.println("Autonomous Cleaning Activated.");
// Motor1 (Cleaning Brush) - Start
motor1.setSpeed(150); // Adjust speed
motor1.run(FORWARD);
delay(5000); // Run for 5 seconds
// Motor1 (Cleaning Brush) - Stop
motor1.setSpeed(0);
motor1.run(RELEASE);
Serial.println("Cleaning Complete.");
}
void handleBluetoothCommand(int command)
{
if(bluetoothCommand == 11){ forword(); delay(1000); }
else if(bluetoothCommand == 22){backword();delay(1000);}
else if(bluetoothCommand == 55){Stop(); }
}
void forword()
{
motor1.run(FORWARD);
motor2.run(BACKWARD);
}
void backword()
{
motor1.run(BACKWARD);
motor2.run(FORWARD);
}
void Stop()
{
motor1.run(RELEASE); // stop
motor2.run(RELEASE);
}
